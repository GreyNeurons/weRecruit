{%extends "app_header.html" %}
{%block content%}

<section class="container is-fullheight">
  <div class = "block" style="margin-left: 5%;">
    <span class="title has-text-info">Upload resumes</span><br>
    <span class="is-size-7 has-text-info">This section allows you to upload resume with basic information about the candidate</span>
  </div>

      <div class="columns is-centered">
          <div class="column is-half" style="margin-right: 10%; margin-left: 5%;">
          <form  onsubmit ="document.getElementById('spinner').style.display = 'block';document.getElementById('spinner').classList.add('is-loading');return true;" action = "/resume/save" method="POST" enctype="multipart/form-data">
            {% for error in form.submit.errors %}
                <p><large class="has-text-danger">{{ error }}</large></p>  
            {% endfor %}

            {{ form.hidden_tag() }}
            {{form.id()}}

            <div class="field">
              <div  id="resume-selector" class="file has-name">
                <label class="file-label">
                  <input type="file" name="candidate_resume" class="file-input">
                  <span class="file-cta">
                    <span class="file-icon">
                      <i class="fas fa-upload"></i>
                    </span>
                    <span class="file-label">
                      Select resume ( word, pdf only)â€¦
                    </span>
                  </span>
                  <span class="file-name">
                    {{form.candidate_resume.data}}
                  </span>
                </label>
              </div>
              <script>
                resumefileInput = document.querySelector('#resume-selector input[type=file]');
                resumefileInput.onchange = () => {
                  if (resumefileInput.files.length > 0) {
                    //alert('inside file change');
                    console.log('File selected for upload is : ');
                    fileName = document.querySelector('#resume-selector .file-name');
                    fileName.textContent = resumefileInput.files[0].name;
                    console.log('File selected for upload is : ' + fileName.textContent);

                  }
                }
              </script>
                {% for error in form.candidate_resume.errors %}
                    <small class="has-text-danger has-text-left">{{ error }}</small>  
                {% endfor %}
          </div>

            <div class="field">
              <label class="label {{theme_text_color}} has-text-left">{{ form.candidate_name.label }}</label>
              <div class="control">
                {{form.candidate_name(class='input', placeholder="Enter candidate's name")}}
                {% for error in form.candidate_name.errors %}
                  <small class="has-text-danger">{{ error }}</small>  
                {% endfor %}
              </div>
            </div>
            <div class="field">
              <label class="label {{theme_text_color}} has-text-left">{{ form.candidate_email.label }}</label>
              <div class="control">
                {{form.candidate_email(class='input', placeholder="Enter candidate's email")}}
                {% for error in form.candidate_email.errors %}
                  <small class="has-text-danger">{{ error }}</small>  
                {% endfor %}
              </div>
            </div>
            <div class="field">
              <label class="label {{theme_text_color}} has-text-left">{{ form.candidate_phone.label }}</label>
              <div class="control">
                {{form.candidate_phone(class='input', placeholder="Enter candidate's phone")}}
                {% for error in form.candidate_phone.errors %}
                  <small class="has-text-danger">{{ error }}</small>  
                {% endfor %}
              </div>
            </div>

            <div class="field">
              <p class="control">
                {{ form.submit( class = 'button is-success ') }}
                <div id ="spinner" class='button is-primary' style="display:none">Saving...</div>
              </p>      
              {% for error in form.submit.errors %}
              <p><large class="has-text-danger">{{ error }}</large></p>  
              {% endfor %}

            </div>            
          </form>
        </div>
        <section class="container is-fullheight">
          <div class = "block is-size-4 {{theme_text_color}}">
             
          </div>
          <div class ="notification is-info has-text-left">
           <b> <label> Upload resumes via Email</label></b>
             <br><h4>You can upload resumes to your WeRecruit account by </h4> 
              <li>Sending resumes as one or more attachments ( docx,doc,pdf ) from your registered email account to resumes@werecruit.cloud.</li>
              <br><li>WeRecruit detects the candidate name, phone, email from the attached resumes to create a record in the system. You should verify the name, email & phone fields and correct them if required.</li>
              <br><li>Resumes uploaded via email can be browsed similar to resumes uploaded from web app by navigating to 'Resumes->Browser' menu.</li>  
          </div>
        </section>
      </div>
</section>

{% endblock %}

